(()=>{"use strict";function e(e,t){let o=0;return{length:e,hits:o,direction:t,typeOfShip:()=>5===e?"carrier":4===e?"battleship":3===e?"cruiser":3===e?"submarine":2===e?"patrol boat":void 0,getHits:()=>o,increaseHit:()=>{o++},isSunk:()=>o>=e}}function t(){let e=[],t=[],o=[],r=[];return{placeShip:(o,r,l)=>(console.log(`from board ${r} ${l}`),!!((e,o,r)=>{let l=[],n=!1;for(let t=0;t<e.length;t++)"horizontal"===e.direction?l.push([o+t,r]):l.push([o,r+t]);return l.forEach((e=>{t.some(((t,o)=>t[0]===e[0]&&t[1]===e[1]))&&(n=!0)})),console.log(n),!1===n&&("horizontal"===e.direction?o+e.length-1<10:r+e.length-1<10)})(o,r,l)&&(console.log("valid"),((o,r,l)=>{if("horizontal"===o.direction)for(let n=0;n<o.length;n++)e.push([o,r+n,l]),t.push([r+n,l]);else for(let n=0;n<o.length;n++)e.push([o,r,l+n]),t.push([r,l+n])})(o,r,l),!0)),receiveAttack:(t,l)=>{let n=e.find(((e,o)=>e[1]===t&&e[2]===l));return null==n?(void 0===o.find(((e,o)=>e[0]===t&&e[1]===l))&&o.push([t,l]),!1):void 0===r.find(((e,o)=>e[0]===t&&e[1]===l))?(n[0].increaseHit(),r.push([t,l]),!0):void 0},missed:o,areAllSunk:()=>e.length===r.length,occupiedCoords:e,cells:t,getCells:()=>t}}function o(){let e=0,t="player";const o=(e,t)=>{let o=[[e+1,t],[e-1,t],[e,t+1],[e,t-1]];return o[Math.floor(Math.random()*o.length)]};return{turnCount:e,currentTurn:t,determineTurn:()=>{t=e%2==0?"player":"AI"},getTurn:()=>t,changeTurn:t=>{e=t},playerTurn:(t,o,r)=>{t.receiveAttack(o,r)||e++},AITurn:t=>{let r=(Math.floor(10*Math.random()),Math.floor(10*Math.random()));t.receiveAttack(r[0],r[1])?o(r[0],r[1]):e++},getRandomAdjacent:o}}document.querySelector(".grids");const r=document.querySelector(".player-grid"),l=document.querySelector(".AI-grid");o(),o();let n=t(),a=t(),i=e(4,"horizontal"),h=e(3,"vertical"),c=e(3,"horizontal"),d=e(2,"vertical");n.placeShip(i,1,0),n.placeShip(h,3,5),n.placeShip(c,4,8),n.placeShip(d,7,6),function(){for(let e=9;e>=0;e--){document.createElement("div");for(let t=0;t<10;t++){let o=document.createElement("div");r.appendChild(o).className="player-grid-item",o.innerText=`${t},${e}`,o.id=`${t},${e}`}}for(let e=9;e>=0;e--){document.createElement("div");for(let t=0;t<10;t++){let o=document.createElement("div");l.appendChild(o).className="AI-grid-item",o.innerText=`${t},${e}`,o.id=`${t},${e}`}}}(),function(){let t=["horizontal","vertical"],o=e(4,t[Math.floor(Math.random()*t.length)]),r=e(3,t[Math.floor(Math.random()*t.length)]),l=e(3,t[Math.floor(Math.random()*t.length)]),n=e(2,t[Math.floor(Math.random()*t.length)]);for(console.log(o),console.log(r),console.log(l),console.log(n);!a.placeShip(o,Math.floor(10*Math.random()),Math.floor(10*Math.random())););for(;!a.placeShip(r,Math.floor(10*Math.random()),Math.floor(10*Math.random())););for(;!a.placeShip(l,Math.floor(10*Math.random()),Math.floor(10*Math.random())););for(;!a.placeShip(n,Math.floor(10*Math.random()),Math.floor(10*Math.random())););}(),function(){const e=window.document.querySelectorAll(".player-grid-item");let t=n.getCells();e.forEach(((e,o)=>{t.some((t=>t.toString()===e.id))&&e.classList.add("has-ship")}));const o=window.document.querySelectorAll(".AI-grid-item");let r=a.getCells();r.forEach((e=>{})),o.forEach(((e,t)=>{r.some((t=>t.toString()===e.id))&&e.classList.add("has-ship")}))}(),takeTurns()})();